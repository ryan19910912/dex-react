{
  "version": 3,
  "sources": ["../../@thirdweb-dev/wallets/evm/connectors/device-wallet/dist/thirdweb-dev-wallets-evm-connectors-device-wallet.browser.esm.js"],
  "sourcesContent": ["import { _ as _classPrivateFieldInitSpec, a as _classPrivateFieldSet, b as _classPrivateFieldGet } from '../../../../dist/classPrivateFieldSet-eea39a9a.browser.esm.js';\nimport { _ as _defineProperty } from '../../../../dist/defineProperty-c8ecdc07.browser.esm.js';\nimport { T as TWConnector } from '../../../../dist/tw-connector-443c384d.browser.esm.js';\nimport { providers } from 'ethers';\nimport { n as normalizeChainId } from '../../../../dist/normalizeChainId-e4cc0175.browser.esm.js';\nimport '../../../../dist/checkPrivateRedeclaration-3aaaa21d.browser.esm.js';\nimport 'eventemitter3';\n\nvar _provider = /*#__PURE__*/new WeakMap();\nvar _signer = /*#__PURE__*/new WeakMap();\nclass DeviceWalletConnector extends TWConnector {\n  constructor(options) {\n    super();\n    _defineProperty(this, \"id\", \"device_wallet\");\n    _defineProperty(this, \"name\", \"Device Wallet\");\n    _defineProperty(this, \"options\", void 0);\n    _classPrivateFieldInitSpec(this, _provider, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _signer, {\n      writable: true,\n      value: void 0\n    });\n    _defineProperty(this, \"shimDisconnectKey\", \"deviceWallet.shimDisconnect\");\n    _defineProperty(this, \"onChainChanged\", chainId => {\n      const id = normalizeChainId(chainId);\n      const unsupported = !this.options.chains.find(c => c.chainId === id);\n      this.emit(\"change\", {\n        chain: {\n          id,\n          unsupported\n        }\n      });\n    });\n    this.options = options;\n  }\n  async connect(args) {\n    if (args.chainId) {\n      this.switchChain(args.chainId);\n    }\n    const signer = await this.getSigner();\n    const address = await signer.getAddress();\n    return address;\n  }\n  async disconnect() {\n    _classPrivateFieldSet(this, _provider, undefined);\n    _classPrivateFieldSet(this, _signer, undefined);\n  }\n  async getAddress() {\n    const signer = await this.getSigner();\n    if (!signer) {\n      throw new Error(\"No signer found\");\n    }\n    return await signer.getAddress();\n  }\n  async isConnected() {\n    try {\n      const addr = await this.getAddress();\n      return !!addr;\n    } catch {\n      return false;\n    }\n  }\n  async getProvider() {\n    if (!_classPrivateFieldGet(this, _provider)) {\n      _classPrivateFieldSet(this, _provider, new providers.JsonRpcBatchProvider(this.options.chain.rpc[0]));\n    }\n    return _classPrivateFieldGet(this, _provider);\n  }\n  async getSigner() {\n    if (!_classPrivateFieldGet(this, _signer)) {\n      const provider = await this.getProvider();\n      _classPrivateFieldSet(this, _signer, getSignerFromEthersWallet(this.options.ethersWallet, provider));\n    }\n    return _classPrivateFieldGet(this, _signer);\n  }\n  async switchChain(chainId) {\n    const chain = this.options.chains.find(c => c.chainId === chainId);\n    if (!chain) {\n      throw new Error(\"Chain not found\");\n    }\n    _classPrivateFieldSet(this, _provider, new providers.JsonRpcBatchProvider(chain.rpc[0]));\n    _classPrivateFieldSet(this, _signer, getSignerFromEthersWallet(this.options.ethersWallet, _classPrivateFieldGet(this, _provider)));\n    this.onChainChanged(chainId);\n  }\n  async setupListeners() {}\n  updateChains(chains) {\n    this.options.chains = chains;\n  }\n}\nfunction getSignerFromEthersWallet(ethersWallet, provider) {\n  if (provider) {\n    return ethersWallet.connect(provider);\n  }\n  return ethersWallet;\n}\n\nexport { DeviceWalletConnector };\n"],
  "mappings": "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",
  "names": []
}
